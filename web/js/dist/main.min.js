(()=>{var qe=Object.create;var b=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var xe=Object.getPrototypeOf,je=Object.prototype.hasOwnProperty;var we=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_e=(e,t)=>{for(var n in t)b(e,n,{get:t[n],enumerable:!0})},ke=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ie(t))!je.call(e,r)&&r!==n&&b(e,r,{get:()=>t[r],enumerable:!(o=Le(t,r))||o.enumerable});return e};var Ce=(e,t,n)=>(n=e!=null?qe(xe(e)):{},ke(t||!e||!e.__esModule?b(n,"default",{value:e,enumerable:!0}):n,e));var me=we((Ut,de)=>{(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";let e=[{id:0,value:"Too weak",minDiversity:0,minLength:0},{id:1,value:"Weak",minDiversity:2,minLength:6},{id:2,value:"Medium",minDiversity:4,minLength:8},{id:3,value:"Strong",minDiversity:4,minLength:10}],t=(n,o=e,r="!\"#$%&'()*+,-./:;<=>?@[\\\\\\]^_`{|}~")=>{let s=n||"";o[0].minDiversity=0,o[0].minLength=0;let c=[{regex:"[a-z]",message:"lowercase"},{regex:"[A-Z]",message:"uppercase"},{regex:"[0-9]",message:"number"}];r&&c.push({regex:`[${r}]`,message:"symbol"});let i={};i.contains=c.filter(l=>new RegExp(`${l.regex}`).test(s)).map(l=>l.message),i.length=s.length;let a=o.filter(l=>i.contains.length>=l.minDiversity).filter(l=>i.length>=l.minLength).sort((l,m)=>m.id-l.id).map(l=>({id:l.id,value:l.value}));return Object.assign(i,a[0]),i};de.exports={passwordStrength:t,defaultOptions:e}})});function A(){Alpine.bind("BulkEdit",()=>({"@submit"(e){e.preventDefault(),document.querySelectorAll(".ch-toggle").forEach(t=>{if(t.checked){let n=document.createElement("input");n.type="hidden",n.name=t.name,n.value=t.value,e.target.appendChild(n)}}),e.target.submit()}})),Alpine.store("form",{dirty:!1,makeDirty(){this.dirty=!0}}),document.querySelectorAll("#vstobjects input, #vstobjects select, #vstobjects textarea").forEach(e=>{e.addEventListener("change",()=>{Alpine.store("form").makeDirty()})}),Alpine.data("notifications",()=>({initialized:!1,open:!1,notifications:[],toggle(){this.open=!this.open,this.initialized||this.list()},async list(){let e=document.querySelector("#token").getAttribute("token"),t=await fetch(`/list/notifications/?ajax=1&token=${e}`);if(this.initialized=!0,!t.ok)throw new Error("An error occurred while listing notifications.");this.notifications=Object.values(await t.json())},async remove(e){let t=document.querySelector("#token").getAttribute("token");await fetch(`/delete/notification/?delete=1&notification_id=${e}&token=${t}`),this.notifications=this.notifications.filter(n=>n.ID!=e),this.notifications.length===0&&(this.open=!1)},async removeAll(){let e=document.querySelector("#token").getAttribute("token");await fetch(`/delete/notification/?delete=1&token=${e}`),this.notifications=[],this.open=!1}}))}function E(){if(document.querySelectorAll("dialog[open]").length===0){let t=document.querySelector("#vstobjects .form-control:not([disabled]),		#vstobjects .form-select:not([disabled])");t&&t.focus()}}var q={};_e(q,{createConfirmationDialog:()=>d,debounce:()=>u,getCssVariable:()=>Fe,randomPassword:()=>y,showSpinner:()=>v});var De=e=>crypto.getRandomValues(new Uint8Array(e)),Ne=(e,t,n)=>{let o=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*o*t/e.length);return(s=t)=>{let c="";for(;;){let i=n(r),a=r;for(;a--;)if(c+=e[i[a]&o]||"",c.length===s)return c}}},B=(e,t=21)=>Ne(e,t,De);function y(e=16){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="abcdefghijklmnopqrstuvwxyz",o="0123456789",r="!@#$%^&*()_+-=[]{}|;:,./<>?",s=t+n+o+r,c=B(s,e),i;do i=c();while(!(/[a-z]/.test(i)&&/[A-Z]/.test(i)&&/\d/.test(i)));return i}function u(e,t=100){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>e.apply(this,o),t)}}function Fe(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}function v(){document.querySelector(".js-spinner").classList.add("active")}function d({title:e,message:t="Are you sure?",targetUrl:n,spinner:o=!1}){let r=document.createElement("dialog");if(r.classList.add("modal"),e){let g=document.createElement("h2");g.innerHTML=e,g.classList.add("modal-title"),r.append(g)}let s=document.createElement("p");s.innerHTML=t,s.classList.add("modal-message"),r.append(s);let c=document.createElement("div");c.classList.add("modal-options");let i=document.createElement("button");i.type="submit",i.classList.add("button"),i.textContent="OK",c.append(i);let a=document.createElement("button");a.type="button",a.classList.add("button","button-secondary","u-ml5"),a.textContent="Cancel",n&&c.append(a),r.append(c);let l=()=>{n&&(o&&v(),window.location.href=n),p()},m=()=>p(),p=()=>{i.removeEventListener("click",l),a.removeEventListener("click",m),r.removeEventListener("close",p),r.remove()};i.addEventListener("click",l),a.addEventListener("click",m),r.addEventListener("close",p),document.body.append(r),r.showModal()}function L(){document.querySelectorAll(".js-confirm-action").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let n=e.dataset.confirmTitle,o=e.dataset.confirmMessage,r=e.getAttribute("href");d({title:n,message:o,targetUrl:r,spinner:!0})})})}function I(){X(".js-account-input",".js-account-output"),X(".js-password-input",".js-password-output")}function X(e,t){let n=document.querySelector(e),o=document.querySelector(t);if(!n||!o)return;function r(s){o.textContent=s,Re()}n.addEventListener("input",u(s=>r(s.target.value))),r(n.value)}function Re(){let e=document.querySelector(".js-mail-info");if(!e)return;let t=Te(e.cloneNode(!0));document.querySelector(".js-hidden-credentials").value=t}function Te(e){let t=[...e.querySelectorAll("h2")],n=[...e.querySelectorAll("ul")];return t.map((o,r)=>{let c=[...n[r].querySelectorAll("li")].map(i=>{let a=i.querySelector(".values-list-label"),l=i.querySelector(".values-list-value"),m=l.querySelector("a"),p=m?m.href:l.textContent;return`${a.textContent}: ${p}`}).join(`
`);return`${o.textContent}
${c}
`}).join(`
`)}function x(){document.querySelectorAll(".js-generate-cron").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest("fieldset");["min","hour","day","month","wday"].forEach(o=>{let r=t.querySelector(`[name=h_${o}]`).value,s=document.querySelector(`#vstobjects input[name=v_${o}]`);s.value=r,s.classList.add("highlighted"),s.addEventListener("transitionend",()=>{s.classList.remove("highlighted")},{once:!0})})})})}function j(){let e=document.querySelector(".js-db-hint-username"),t=document.querySelector(".js-db-hint-database-name");!e||!t||(Ue(t),Y(e),Y(t))}function Ue(e){e.value.indexOf(Alpine.store("globals").USER_PREFIX)===0&&(e.value=e.value.slice(Alpine.store("globals").USER_PREFIX.length))}function Y(e){e.value.trim()!==""&&Z(e),e.addEventListener("input",u(t=>Z(t.target)))}function Z(e){let t=e.parentElement.querySelector(".hint");e.value.trim()===""&&(t.textContent=""),t.textContent=Alpine.store("globals").USER_PREFIX+e.value}function w(){let e=document.querySelector(".js-discard-all-mail");e&&e.addEventListener("click",()=>{let t=document.querySelector(".js-forward-to-textarea"),n=document.querySelector(".js-do-not-store-checkbox");e.checked?(t.disabled=!0,n.checked=!0,n.parentElement.classList.add("u-hidden")):(t.disabled=!1,n.parentElement.classList.remove("u-hidden"))})}function _(){let e=document.querySelector(".js-dns-record-input");e&&(e.value.trim()!=""&&Q(e),e.addEventListener("input",u(t=>Q(t.target))))}function Q(e){let t=document.querySelector(".js-dns-record-domain"),n=e.parentElement.querySelector(".hint"),o=e.value.trim();if(o===""){n.textContent="";return}o==="@"&&(o=""),o===t.value&&(o=""),o!==""&&o.slice(-1)!=="."&&(o+="."),n.textContent=o+t.value}function k(){let e=document.querySelector(".js-custom-docroot-domain"),t=document.querySelector(".js-custom-docroot-dir"),n=document.querySelector(".js-custom-docroot-prepath"),o=document.querySelector(".js-custom-docroot-hint");if(!e||!t||!n||!o)return;r(),t.addEventListener("input",u(r)),e.addEventListener("change",r);function r(){let s=n.value,c=e.value,i=t.value;o.textContent=`${s}${c}/public_html/${i}`}}function C(){let e=document.querySelector(".js-stats-select"),t=document.querySelectorAll(".js-stats-auth");e&&t.length&&e.addEventListener("change",()=>{e.value==="none"?t.forEach(c=>{c.style.display="none"}):t.forEach(c=>{c.style.display="block"})}),document.querySelectorAll(".js-redirect-custom-value").forEach(c=>{c.addEventListener("change",()=>{let i=document.querySelector(".js-custom-redirect-fields");i&&(c.value==="custom"?i.classList.remove("u-hidden"):i.classList.add("u-hidden"))})});let n=document.querySelector(".js-toggle-lets-encrypt"),o=document.querySelector(".js-ssl-details");n&&o&&n.addEventListener("change",()=>{n.checked?o.style.display="none":o.style.display="block"});let r=document.querySelector(".js-proxy-template-select"),s=document.querySelector(".js-clear-cache-button");r&&s&&r.addEventListener("change",()=>{r.value==="caching"?s.classList.remove("u-hidden"):s.classList.add("u-hidden")})}function D(){let e=Alpine.store("globals").ERROR_MESSAGE;e&&d({message:e})}function N(){document.querySelectorAll(".js-unlimited-toggle").forEach(e=>{let t=e.parentElement.querySelector("input");F(t.value)?te(t,e):ne(t,e),e.addEventListener("click",()=>{Oe(t,e)})})}function ee(){document.querySelectorAll("input:disabled").forEach(e=>{F(e.value)&&(e.disabled=!1,e.value="unlimited")})}function F(e){let t=e.trim();return t==="unlimited"||t===Alpine.store("globals").UNLIMITED}function te(e,t){t.classList.add("active"),e.dataset.prevValue=e.value,e.value=Alpine.store("globals").UNLIMITED,e.disabled=!0}function ne(e,t){t.classList.remove("active");let n=e.dataset.prevValue?e.dataset.prevValue.trim():null;n&&(e.value=n),F(e.value)&&(e.value="0"),e.disabled=!1}function Oe(e,t){t.classList.contains("active")?ne(e,t):te(e,t)}function R(){document.querySelectorAll(".js-toggle-options").forEach(e=>{e.addEventListener("click",Pe)})}function Pe(){let e=document.querySelector(".js-advanced-options"),t=document.querySelector(".js-basic-options");e.classList.contains("u-hidden")?(e.classList.remove("u-hidden"),t.classList.add("u-hidden"),T()):(e.classList.add("u-hidden"),t.classList.remove("u-hidden"))}function T(){let e=document.querySelector(".js-advanced-textarea");document.querySelectorAll("#vstobjects input[type=text]").forEach(n=>{let o=n.dataset.regexp,r=n.dataset.prevValue;n.setAttribute("data-prev-value",n.value);let s=new RegExp(`(${o})(.+)(${r})`);e.value=e.value.replace(s,`$1$2${n.value}`)})}function U(){let e=document.querySelector("#vstobjects");e&&e.addEventListener("submit",()=>{v(),e.classList.contains("js-enable-inputs-on-submit")&&document.querySelectorAll("input[disabled]").forEach(o=>{o.disabled=!1}),ee();let n=document.querySelector(".js-basic-options");n&&!n.classList.contains("u-hidden")&&T()});let t=document.querySelector('[x-bind="BulkEdit"]');t&&t.addEventListener("submit",()=>{v()})}function S(){oe(".js-ftp-user",Me),oe(".js-ftp-path",He)}function oe(e,t){document.querySelectorAll(e).forEach(n=>{let o=n.value.trim();o!==""&&t(n,o),n.addEventListener("input",u(r=>t(r.target,r.target.value)))})}function Me(e,t){let o=e.parentElement.querySelector(".js-ftp-user-hint"),r=t.replace(/[^\w\d]/gi,"");r!==t&&(e.value=r),o.textContent=Alpine.store("globals").USER_PREFIX+r}function He(e,t){let o=e.parentElement.querySelector(".js-ftp-path-hint"),r=$e(t);o.textContent=r}function $e(e){return e[0]!=="/"&&(e="/"+e),e.replace(/\/(\/+)/g,"/")}function O(){Ve(),re(),Ke(),se(),We()}function Ve(){document.querySelectorAll(".js-ftp-user-psw").forEach(e=>{e.addEventListener("input",u(t=>ie(t.target)))})}function re(){document.querySelectorAll(".js-ftp-password-generate").forEach(e=>{e.addEventListener("click",()=>{let t=e.parentElement.parentElement.querySelector(".js-ftp-user-psw");t.value=y(),ie(t)})})}function Ke(){let e=document.querySelector(".js-add-ftp-account");e&&e.addEventListener("click",()=>{let t=document.querySelector(".js-ftp-account-template .js-ftp-account-nrm").cloneNode(!0),o=document.querySelectorAll(".js-active-ftp-accounts .js-ftp-account").length;t.querySelectorAll("input").forEach(r=>{let s=r.getAttribute("name"),c=r.getAttribute("id");r.setAttribute("name",s.replace("%INDEX%",o)),c&&r.setAttribute("id",c.replace("%INDEX%",o))}),t.querySelectorAll("input + label").forEach(r=>{let s=r.getAttribute("for");r.setAttribute("for",s.replace("%INDEX%",o))}),t.querySelector(".js-ftp-user-number").textContent=o,document.querySelector(".js-active-ftp-accounts").appendChild(t),ce(),S(),re(),se()})}function se(){document.querySelectorAll(".js-delete-ftp-account").forEach(e=>{e.addEventListener("click",()=>{let t=e.closest(".js-ftp-account");if(t.querySelector(".js-ftp-user-deleted").value="1",t.querySelector(".js-ftp-user-is-new").value==1)return t.remove();t.classList.remove("js-ftp-account-nrm"),t.style.display="none",ce(),document.querySelectorAll(".js-active-ftp-accounts .js-ftp-account-nrm").length==0&&(document.querySelector(".js-add-new-ftp-user-button").style.display="none",document.querySelector('input[name="v_ftp"]').checked=!1)})})}function ce(){document.querySelectorAll(".js-active-ftp-accounts .js-ftp-user-number").forEach((t,n)=>{t.textContent=n+1})}function We(){let e=document.querySelector(".js-toggle-ftp-accounts");e&&e.addEventListener("change",t=>{let n=t.target.checked,o=document.querySelector(".js-add-new-ftp-user-button"),r=document.querySelectorAll(".js-ftp-account-nrm");o.style.display=n?"block":"none",r.forEach(s=>{let c=s.querySelector(".js-ftp-user"),i=s.querySelector(".js-ftp-user-deleted");c.value.trim()!==""&&(i.value=n?"0":"1"),s.style.display=n?"block":"none"})})}function ie(e){let t=e.closest(".js-ftp-account");if(t.querySelector(".js-email-alert-on-psw"))return;let o=t.querySelector(".js-ftp-user-is-new").name.replace("is_new","v_ftp_email"),r=`
		<div class="u-pl30 u-mb10">
			<label for="${o}" class="form-label">
				Send FTP credentials to email
			</label>
			<input type="email" class="form-control js-email-alert-on-psw"
				value="" name="${o}" id="${o}">
		</div>`;t.insertAdjacentHTML("beforeend",r)}function P(){let e=document.querySelector(".js-datasource-select");if(!e)return;let t=ae(e.dataset.countryIplists),n=ae(e.dataset.blacklistIplists);le(e,Alpine.store("globals").BLACKLIST,n),le(e,Alpine.store("globals").IPVERSE,t)}function ae(e){return JSON.parse(e||"[]").sort((n,o)=>n.name.localeCompare(o.name))}function le(e,t,n){ue(e,t,"",!0),n.forEach(o=>{ue(e,o.name,o.source,!1)})}function ue(e,t,n,o){let r=document.createElement("option");r.text=t,r.value=n,o&&(r.disabled=!0),e.append(r)}function M(){let e=document.querySelector(".js-toggle-all");e&&e.addEventListener("change",Ge)}function Ge(e){let t=e.target.checked;document.querySelectorAll(".ch-toggle").forEach(n=>{n.checked=t}),document.querySelectorAll(".l-unit").forEach(n=>{n.classList.toggle("selected",t)})}function H(){let e={sort_par:"sort-name",sort_direction:-1,sort_as_int:!1};document.querySelectorAll(".toolbar-sorting-toggle").forEach(t=>{t.addEventListener("click",n=>{n.preventDefault(),document.querySelector(".toolbar-sorting-menu").classList.toggle("u-hidden")})}),document.addEventListener("click",t=>{let n=document.querySelector(".toolbar-sorting-toggle"),o=document.querySelector(".toolbar-sorting-menu");!o||!n||!o.contains(t.target)&&!n.contains(t.target)&&!o.classList.contains("u-hidden")&&o.classList.add("u-hidden")}),document.querySelectorAll(".toolbar-sorting-menu span").forEach(t=>{t.addEventListener("click",function(){if(document.querySelector(".toolbar-sorting-menu").classList.toggle("u-hidden"),this.classList.contains("active"))return;document.querySelectorAll(".toolbar-sorting-menu span").forEach(a=>a.classList.remove("active")),this.classList.add("active");let o=this.closest("li");e.sort_par=o.getAttribute("entity"),e.sort_as_int=!!o.getAttribute("sort_as_int"),e.sort_direction=this.classList.contains("up")?1:-1;let r=document.querySelector(".toolbar-sorting-toggle");r.querySelector("b").innerHTML=o.querySelector(".name").innerHTML;let s=r.querySelector(".fas");s.classList.remove("fa-arrow-up-a-z","fa-arrow-down-a-z"),s.classList.add(this.classList.contains("up")?"fa-arrow-up-a-z":"fa-arrow-down-a-z");let c=Array.from(document.querySelectorAll(".units .l-unit")).sort((a,l)=>{let m=a.getAttribute(e.sort_par),p=l.getAttribute(e.sort_par);if(e.sort_as_int){let g=Number.parseInt(m),Ee=Number.parseInt(p);return g>=Ee?e.sort_direction:e.sort_direction*-1}return m<=p?e.sort_direction:e.sort_direction*-1}),i=document.querySelector(".units");c.forEach(a=>i.appendChild(a))})})}function $(){let e=document.querySelector(".js-add-ns");e&&e.addEventListener("click",()=>ze(e)),document.querySelectorAll(".js-remove-ns").forEach(t=>{t.addEventListener("click",()=>Je(t))})}function ze(e){let t=document.querySelectorAll("input[name^=v_ns]"),n=t.length;if(n<8){let o=t[0].parentElement.cloneNode(!0),r=o.querySelector("input");r.removeAttribute("value"),r.name=`v_ns${n+1}`,e.before(o)}n===7&&e.classList.add("u-hidden")}function Je(e){e.parentElement.remove(),document.querySelectorAll("input[name^=v_ns]").forEach((n,o)=>n.name=`v_ns${o+1}`),document.querySelector(".js-add-ns").classList.remove("u-hidden")}var fe=Ce(me(),1);function V(){document.querySelectorAll(".js-password-input").forEach(e=>{e.addEventListener("input",u(t=>Be(t.target)))}),document.querySelectorAll(".js-generate-password").forEach(e=>{e.addEventListener("click",()=>{let t=e.parentNode.nextElementSibling.querySelector(".js-password-input");t&&(t.value=y(),t.dispatchEvent(new Event("input")))})})}function Be(e){let t=e.value,n=e.parentNode.querySelector(".js-password-meter");if(n){if(t==="")return n.value=0;n.value=(0,fe.passwordStrength)(t).id+1}}var h={active_menu:1,menu_selector:".main-menu-item",menu_active_selector:".active"};function he(){be("left")}function ge(){be("right")}function ye(){Ae("down")}function ve(){Ae("up")}function Se(){let e=document.querySelector(h.menu_selector+".focus a");if(e)return location.href=e.getAttribute("href");let t=document.querySelector(".units .l-unit.focus .actions-panel__col.actions-panel__edit a");t&&(location.href=t.getAttribute("href"))}function f(e){let t=e.dataset.keyAction;if(t==="js")return e.querySelector(".data-controls").click();t==="href"&&(location.href=e.querySelector("a").getAttribute("href"))}function be(e){let t=h.menu_selector,n=h.menu_active_selector,o=Array.from(document.querySelectorAll(t)),r=document.querySelector(`${t}.focus`),s=document.querySelector(t+n),c=o.indexOf(r);c===-1&&(c=o.indexOf(s)),o.forEach(i=>i.classList.remove("focus")),e==="left"?c>0?o[c-1].classList.add("focus"):pe("last"):e==="right"&&(c<o.length-1?o[c+1].classList.add("focus"):pe("first"))}function Ae(e){let t=".units .l-unit:not(.header)",n=Array.from(document.querySelectorAll(t)),o=document.querySelector(".units .l-unit.focus"),r=n.indexOf(o);if(r===-1&&(r=0),e==="up"&&r>0)r--;else if(e==="down"&&r<n.length-1)r++;else return;o&&o.classList.remove("focus"),n[r].classList.add("focus"),window.scrollTo({top:n[r].getBoundingClientRect().top-200+window.scrollY,behavior:"smooth"})}function pe(e="first"){if(h.active_menu===0){h.active_menu=1,h.menu_selector=".main-menu-item",h.menu_active_selector=".active";let t=document.querySelectorAll(h.menu_selector),n=e==="first"?0:t.length-1;t[n].classList.add("focus")}}function K(){Alpine.store("shortcuts",{registeredShortcuts:[],register(e,t,n){n={...{type:"keydown",propagate:!1,disabledInInput:!1,target:document},...n};let r=s=>{if(n.disabledInInput){let a=s.target.nodeType===3?s.target.parentNode:s.target;if(["input","textarea","selectbox"].includes(a.tagName.toLowerCase()))return}let c=[e.code?e.code==s.code:e.key.toLowerCase()==s.key.toLowerCase(),e.altKey&&s.altKey||!e.altKey&&!s.altKey,e.ctrlKey&&s.ctrlKey||!e.ctrlKey&&!s.ctrlKey,e.metaKey&&s.metaKey||!e.metaKey&&!s.metaKey,e.shiftKey&&s.shiftKey||!e.shiftKey&&!s.shiftKey];c.filter(Boolean).length===c.length&&(t(s),n.propagate||(s.stopPropagation(),s.preventDefault()))};return this.registeredShortcuts.push({combination:e,callback:r,target:n.target,event:n.type}),n.target.addEventListener(n.type,r),this},unregister(e){let t=this.registeredShortcuts.find(n=>JSON.stringify(n.combination)==JSON.stringify(e));if(t)return this.registeredShortcuts=this.registeredShortcuts.filter(n=>JSON.stringify(n.combination)!=JSON.stringify(e)),t.target.removeEventListener(t.event,t.callback,!1),this}}),Alpine.store("shortcuts").register({key:"A"},e=>{let t=document.querySelector("a.js-button-create");t&&(location.href=t.href)},{disabledInInput:!0}).register({key:"A",ctrlKey:!0,shiftKey:!0},e=>{let t=document.querySelector(".l-unit .ch-toggle:eq(0)").checked;document.querySelectorAll(".l-unit").forEach(n=>n.classList.toggle("selected"),!t),document.querySelectorAll(".l-unit .ch-toggle").forEach(n=>n.checked=!t)},{disabledInInput:!0}).register({code:"Enter",ctrlKey:!0},e=>{document.querySelector("form#vstobjects").submit()}).register({code:"Backspace",ctrlKey:!0},e=>{let t=document.querySelector("a.js-button-back").href;t&&(Alpine.store("form").dirty&&t?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t}):t&&(location.href=t))}).register({key:"F"},e=>{let t=document.querySelector(".js-search-input");t&&t.focus()},{disabledInInput:!0}).register({code:"Digit1"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(1) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit2"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(2) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit3"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(3) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit4"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(4) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit5"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(5) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit6"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(6) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({code:"Digit7"},e=>{let t=document.querySelector(".main-menu .main-menu-item:nth-of-type(7) a");t&&(Alpine.store("form").dirty?d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:t.href}):location.href=t.href)},{disabledInInput:!0}).register({key:"H"},e=>{let t=document.querySelector(".shortcuts");t.open?t.close():t.showModal()},{disabledInInput:!0}).register({code:"Escape"},e=>{let t=document.querySelector("dialog[open]");t&&t.close(),document.querySelectorAll("input, checkbox, textarea, select").forEach(n=>n.blur())}).register({code:"ArrowLeft"},e=>{he()},{disabledInInput:!0}).register({code:"ArrowRight"},e=>{ge()},{disabledInInput:!0}).register({code:"ArrowDown"},e=>{ye()},{disabledInInput:!0}).register({code:"ArrowUp"},e=>{ve()},{disabledInInput:!0}).register({key:"L"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-l");t&&f(t)},{disabledInInput:!0}).register({key:"S"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-s");t&&f(t)},{disabledInInput:!0}).register({key:"W"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-w");t&&f(t)},{disabledInInput:!0}).register({key:"D"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-d");t&&f(t)},{disabledInInput:!0}).register({key:"R"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-r");t&&f(t)},{disabledInInput:!0}).register({key:"N"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-n");t&&f(t)},{disabledInInput:!0}).register({key:"U"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-u");t&&f(t)},{disabledInInput:!0}).register({code:"Delete"},e=>{let t=document.querySelector(".units .l-unit.focus .shortcut-delete");t&&f(t)},{disabledInInput:!0}).register({code:"Enter"},e=>{if(e.target.tagName=="INPUT"&&e.target.form.id=="vstobjects"&&document.querySelector("form#vstobjects").submit(),Alpine.store("form").dirty)document.querySelector("dialog[open]")?document.querySelector("dialog[open]").querySelector('button[type="submit"]').click():d({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:document.querySelector(".main-menu-item.focus a").href});else if(document.querySelector("dialog[open]"))document.querySelector("dialog[open]").querySelector('button[type="submit"]').click();else{let t=document.querySelector(".units .l-unit.focus .shortcut-enter");t?f(t):Se()}},{propagate:!0})}function W(){let e=document.querySelector(".toolbar"),t=document.querySelector(".top-bar");if(!e||!t)return;window.addEventListener("scroll",n);function n(){let o=e.getBoundingClientRect().top,r=window.scrollY,s=document.documentElement.clientTop,c=o+r-s,i=t.offsetHeight,a=r>c-i;e.classList.toggle("active",a)}}function G(){let e=document.querySelector(".js-sync-email-input"),t=document.querySelector(".js-sync-email-checkbox"),n=document.querySelector(".js-sync-email-output");if(!e||!t||!n)return;function o(){n.value=t.checked?e.value:""}e.addEventListener("input",u(()=>o())),t.addEventListener("change",o)}function z(){let e=document.querySelector(".js-tabs");if(!e)return;let t=e.querySelectorAll(".tabs-item"),n=e.querySelectorAll(".tabs-panel");t.forEach(o=>{o.addEventListener("click",r=>{n.forEach(i=>i.hidden=!0),t.forEach(i=>{i.setAttribute("aria-selected",!1),i.setAttribute("tabindex",-1)});let s=r.target.getAttribute("id"),c=document.querySelector(`[aria-labelledby="${s}"]`);c.hidden=!1,r.target.setAttribute("aria-selected",!0),r.target.setAttribute("tabindex",0),r.target.focus()})})}async function J(){let e=document.querySelectorAll(".js-rrd-chart");if(!e.length)return;let t=await Xe();for(let n of e){let o=n.dataset.service,r=n.dataset.period,s=await Ye(o,r),c=Ze(s,r),i=et(s.unit);new t(n,{type:"line",data:c,options:i})}}async function Xe(){return(await import("/js/dist/chart.js-auto.min.js")).Chart}async function Ye(e,t){return(await fetch("/list/rrd/ajax.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:e,period:t})})).json()}function Ze(e,t){return{labels:e.data.map((n,o)=>{let r=e.meta.start+o*e.meta.step,s=new Date(r*1e3);return Qe(s,t)}),datasets:e.meta.legend.map((n,o)=>{let r=Hestia.helpers.getCssVariable(`--chart-line-${o+1}-color`);return{label:n,data:e.data.map(s=>s[o]),tension:.3,pointStyle:!1,borderWidth:2,borderColor:r}})}}function Qe(e,t){let n={daily:{hour:"2-digit",minute:"2-digit"},weekly:{weekday:"short",day:"numeric"},monthly:{month:"short",day:"numeric"},yearly:{month:"long"}};return e.toLocaleString([],n[t])}function et(e){let t=Hestia.helpers.getCssVariable("--chart-label-color"),n=Hestia.helpers.getCssVariable("--chart-grid-color");return{plugins:{legend:{position:"bottom",labels:{color:t}}},scales:{x:{ticks:{color:t},grid:{color:n}},y:{title:{display:!!e,text:e,color:t},ticks:{color:t},grid:{color:n}}}}}window.Hestia={helpers:q};tt();E();function tt(){L(),I(),x(),w(),_(),k(),C(),U(),O(),M(),H(),$(),V(),W(),G(),z(),R(),J()}document.addEventListener("alpine:init",()=>{A(),j(),D(),S(),P(),K(),N()});})();
//# sourceMappingURL=main.min.js.map
