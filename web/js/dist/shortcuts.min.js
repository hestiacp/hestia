document.addEventListener("alpine:init",()=>{Alpine.store("shortcuts",{registeredShortcuts:[],register(t,e,r){r={...{type:"keydown",propagate:!1,disabledInInput:!1,target:document},...r};const n=o=>{if(r.disabledInInput){const i=o.target.nodeType===3?o.target.parentNode:o.target;if(["input","textarea","selectbox"].includes(i.tagName.toLowerCase()))return}const s=[t.code?t.code==o.code:t.key.toLowerCase()==o.key.toLowerCase(),t.altKey&&o.altKey||!t.altKey&&!o.altKey,t.ctrlKey&&o.ctrlKey||!t.ctrlKey&&!o.ctrlKey,t.metaKey&&o.metaKey||!t.metaKey&&!o.metaKey,t.shiftKey&&o.shiftKey||!t.shiftKey&&!o.shiftKey];s.filter(i=>i).length===s.length&&(e(o),r.propagate||(o.stopPropagation(),o.preventDefault()))};return this.registeredShortcuts.push({combination:t,callback:n,target:r.target,event:r.type}),r.target.addEventListener(r.type,n),this},unregister(t){const e=this.registeredShortcuts.find(r=>JSON.stringify(r.combination)==JSON.stringify(t));if(e)return this.registeredShortcuts=this.registeredShortcuts.filter(r=>JSON.stringify(r.combination)!=JSON.stringify(t)),e.target.removeEventListener(e.event,e.callback,!1),this}}),Alpine.store("shortcuts").register({key:"A"},t=>{const e=document.querySelector(".button#btn-create");e&&(location.href=e.href)},{disabledInInput:!0}).register({key:"A",ctrlKey:!0,shiftKey:!0},t=>{const e=document.querySelector(".l-unit .ch-toggle:eq(0)").checked;document.querySelectorAll(".l-unit").forEach(r=>r.classList.toggle("selected"),!e),document.querySelectorAll(".l-unit .ch-toggle").forEach(r=>r.checked=!e)},{disabledInInput:!0}).register({code:"Enter",ctrlKey:!0},t=>{document.querySelector("form#vstobjects").submit()}).register({code:"Backspace",ctrlKey:!0},t=>{const e=document.querySelector("a.button#btn-back").href;e&&(Alpine.store("form").dirty&&e?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e}):document.querySelector("form#vstobjects .button.cancel")?location.href=$("form#vstobjects input.cancel").attr("onclick").replace("location.href='","").replace("'",""):e&&(location.href=e))}).register({key:"F"},t=>{document.querySelector(".js-search-input").focus()},{disabledInInput:!0}).register({code:"Digit1"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(1) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit2"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(2) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit3"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(3) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit4"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(4) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit5"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(5) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit6"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(6) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({code:"Digit7"},t=>{const e=document.querySelector(".main-menu .main-menu-item:nth-of-type(7) a");e&&(Alpine.store("form").dirty?VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:e.href}):location.href=e.href)},{disabledInInput:!0}).register({key:"H"},t=>{const e=document.querySelector(".shortcuts");e.open?e.close():e.showModal()},{disabledInInput:!0}).register({code:"Escape"},t=>{const e=document.querySelector(".shortcuts");e.open&&e.close(),document.querySelectorAll("input, checkbox, textarea, select").forEach(r=>r.blur())}).register({code:"ArrowLeft"},t=>{VE.navigation.move_focus_left()},{disabledInInput:!0}).register({code:"ArrowRight"},t=>{VE.navigation.move_focus_right()},{disabledInInput:!0}).register({code:"ArrowDown"},t=>{VE.navigation.move_focus_down()},{disabledInInput:!0}).register({code:"ArrowUp"},t=>{VE.navigation.move_focus_up()},{disabledInInput:!0}).register({key:"L"},t=>{const e=$(".units.active .l-unit.focus .shortcut-l");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"S"},t=>{const e=$(".units.active .l-unit.focus .shortcut-s");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"W"},t=>{const e=$(".units.active .l-unit.focus .shortcut-w");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"D"},t=>{const e=$(".units.active .l-unit.focus .shortcut-d");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"R"},t=>{const e=$(".units.active .l-unit.focus .shortcut-r");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"N"},t=>{const e=$(".units.active .l-unit.focus .shortcut-n");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({key:"U"},t=>{const e=$(".units.active .l-unit.focus .shortcut-u");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({code:"Delete"},t=>{const e=$(".units.active .l-unit.focus .shortcut-delete");e.length&&VE.navigation.shortcut(e)},{disabledInInput:!0}).register({code:"Enter"},t=>{if(t.target.tagName=="INPUT"&&t.target.form.id=="vstobjects"&&document.querySelector("form#vstobjects").submit(),Alpine.store("form").dirty)document.querySelector("dialog[open]")?document.querySelector("dialog[open]").querySelector('button[type="submit"]').click():VE.helpers.createConfirmationDialog({message:Alpine.store("globals").CONFIRM_LEAVE_PAGE,targetUrl:document.querySelector(`${VE.navigation.state.menu_selector}.focus a`).href});else if(document.querySelector("dialog[open]"))document.querySelector("dialog[open]").querySelector('button[type="submit"]').click();else{const e=$(".units.active .l-unit.focus .shortcut-enter");e.length?VE.navigation.shortcut(e):VE.navigation.enter_focused()}},{propagate:!0})});
