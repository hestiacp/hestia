#!/bin/bash
#
# !!! WRAPPER SCRIPT FOR COMPATIBILITY PURPOSES WITH OLD IPV4 SCRIPTS AND EXTERNAL CALLS !!!
#
# info: add dns domain
# options: USER DOMAIN IP [NS1] [NS2] [NS3] [NS4] [NS5] [NS6] [NS7] [NS8] [RESTART] [DNSSEC]
#
# example: v-add-dns-domain admin example.com ns1.example.com ns2.example.com '' '' '' '' '' '' yes
#
# This function adds DNS zone with records defined in the template. If the exp
# argument isn't stated, the expiration date value will be set to next year.
# The soa argument is responsible for the relevant record. By default the first
# user's NS server is used. TTL is set as common for the zone and for all of
# its records with a default value of 14400 seconds.

#----------------------------------------------------------#
#                Variables & Functions                     #
#----------------------------------------------------------#

# Argument definition
user=${1}
domain=${2}
ip=${3}
ipv6="" # EMPTY! Not used here, because of old IPV4 only mode
ns1=${4}
ns2=${5}
ns3=${6}
ns4=${7}
ns5=${8}
ns6=${9}
ns7=${10}
ns8=${11}
restart=${12}
dnssec=${13}

# Includes
# shellcheck source=/etc/hestiacp/hestia.conf
source /etc/hestiacp/hestia.conf

"$HESTIA/bin/v-add-dns-domain-ipv46" "$user" "$domain" "$ip" "$ipv6" "$ns1" "$ns2" "$ns3" "$ns4" "$ns5" "$ns6" "$ns7" "$ns8" "$restart" "$dnssec"
