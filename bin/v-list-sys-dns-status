#!/bin/bash
# info: list dns status
# options: [FORMAT]
#
# The function lists DNS server status


#----------------------------------------------------------#
#                    Variable&Function                     #
#----------------------------------------------------------#

# Argument definition
#format=${1-shell}

# Includes
#source $HESTIA/func/main.sh
source $HESTIA/conf/hestia.conf

#----------------------------------------------------------#
#                       Action                             #
#----------------------------------------------------------#

# Checking DNS system
if [ -z "$DNS_SYSTEM" ]; then
    exit
fi

if [ -e "/etc/bind/named.conf" ]; then
    conf="/etc/bind/named.conf.options"
    dump_file='/var/cache/bind/named.stats'
fi

# Generating DNS stats
rm -f $dump_file 2>/dev/null
/usr/sbin/rndc stats 2>/dev/null

# Displaying DNS status
if [ -e "$dump_file" ]; then
    cat $dump_file
fi

#----------------------------------------------------------#
#                       Hestia                             #
#----------------------------------------------------------#

exit
